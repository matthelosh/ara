"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[627],{5627:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});var n=a(7868),s=a(2677),i=a(7618);const o={name:"FormGuru",props:{selectedGuru:Object},components:{XlsxRead:n.Z,XlsxJson:s.Z,XlsxTable:i.Z},data:function(){return{loading:!1,guru:{},newGurus:[],file:null,headers:[{text:"NIP",value:"nip"},{text:"Nama",value:"name"},{text:"JK",value:"jk"},{text:"Tempat, Tgl Lahir",value:"ttl"},{text:"No. HP",value:"hp"},{text:"Email",value:"email"},{text:"Alamat",value:"alamat"},{text:"Jabatan",value:"jabatan"},{text:"Status",value:"status"},{text:"Opsi",value:"opsi"}],fotoGuru:null,defaultFoto:"/images/1.png"}},methods:{onAvatarError:function(t){t.target.src="/images/1.png"},onFotoPicked:function(t){var e=t.target.files[0];this.defaultFoto=URL.createObjectURL(e),this.fotoGuru=e},close:function(){this.guru={},this.newGurus=[],this.$emit("close")},saveGuru:function(){var t=this;this.loading=!0;var e=new FormData;e.append("guru",JSON.stringify(this.guru)),this.fotoGuru&&e.append("foto",this.fotoGuru),axios({method:"post",url:"/admin/guru/store",data:e}).then((function(e){t.loading=!1,t.guru={},t.$emit("saved")}))},onFilePicked:function(t){this.file=t.target.files?t.target.files[0]:null},parsedFile:function(t){var e=this;t.forEach((function(t,a){t.no=a+1,t.tanggal_lahir=e.parseDate(t.tanggal_lahir)})),this.newGurus=t},parseDate:function(t){var e=Math.floor(t-25569),a=new Date(1e3*(86400*e)),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),s=t-Math.floor(t)+1e-7,i=Math.floor(86400*s);i-=i%60;Math.floor(i/3600),Math.floor(i/60);return n},remove:function(t){this.newGurus.splice(t.index,1)},impor:function(){var t=this;this.loading=!0,axios({method:"post",url:"/admin/guru/import",data:{gurus:this.newGurus}}).then((function(e){t.loading=!1,t.newGurus=[],t.$emit("saved")}))}},computed:{avatar:function(){return this.selectedGuru.nip?"/storage/uploads/img/guru/"+this.selectedGuru.nip+".jpg":this.defaultFoto}},mounted:function(){this.selectedGuru?(this.guru=this.selectedGuru,this.defaultFoto="/storage/uploads/img/guru/"+this.selectedGuru.nip+".jpg"):this.guru={}}};const r=(0,a(1900).Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[a("h3",[a("v-icon",[t._v("mdi-account-plus")]),t._v(" "),a("span",{staticClass:"d-none d-sm-inline"},[t._v("Tambah Data Guru")])],1),t._v(" "),a("v-spacer"),t._v(" "),a("input",{ref:"fileGuru",staticStyle:{display:"none"},attrs:{type:"file",accept:".xlsx,.xls,.csv,.ods"},on:{change:t.onFilePicked}}),t._v(" "),a("v-btn",{attrs:{small:"",color:"bg-gradient-success",rounded:"",dark:""},on:{click:function(e){return t.$refs.fileGuru.click()}}},[a("v-icon",[t._v("mdi-file-excel-outline")]),t._v(" "),a("span",{staticClass:"d-none d-sm-inline"},[t._v("Impor Data")])],1),t._v(" "),a("v-btn",{staticClass:"ml-2",attrs:{fab:"",color:"error",small:""},on:{click:t.close}},[a("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),a("v-card-text",[t.file?t._e():a("v-form",{ref:"formGuru",on:{submit:function(e){return e.preventDefault(),t.saveGuru.apply(null,arguments)}}},[a("v-container",[a("v-row",[a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"3"}},[a("v-avatar",{attrs:{size:"128"}},[a("input",{ref:"fotoGuru",staticStyle:{display:"none"},attrs:{type:"file",accept:".jpg,.png,.svg,.jpeg,.JPEG,.JPG,.bmp"},on:{change:t.onFotoPicked}}),t._v(" "),a("img",{attrs:{src:t.defaultFoto,alt:"Avatar Guru"},on:{click:function(e){return t.$refs.fotoGuru.click()},error:t.onAvatarError}})])],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"9"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"NIP"},model:{value:t.guru.nip,callback:function(e){t.$set(t.guru,"nip",e)},expression:"guru.nip"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nama Lengkap"},model:{value:t.guru.name,callback:function(e){t.$set(t.guru,"name",e)},expression:"guru.name"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Email"},model:{value:t.guru.email,callback:function(e){t.$set(t.guru,"email",e)},expression:"guru.email"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-select",{attrs:{items:["Laki-laki","Perempuan"],dense:"","hide-details":"",outlined:"",label:"Jenis Kelamin"},model:{value:t.guru.jk,callback:function(e){t.$set(t.guru,"jk",e)},expression:"guru.jk"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Tempat Lahir"},model:{value:t.guru.tempat_lahir,callback:function(e){t.$set(t.guru,"tempat_lahir",e)},expression:"guru.tempat_lahir"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",type:"date",label:"Tanggal Lahir"},model:{value:t.guru.tanggal_lahir,callback:function(e){t.$set(t.guru,"tanggal_lahir",e)},expression:"guru.tanggal_lahir"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"No. HP"},model:{value:t.guru.hp,callback:function(e){t.$set(t.guru,"hp",e)},expression:"guru.hp"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-textarea",{attrs:{rows:"1","auto-grow":"",dense:"","hide-details":"",outlined:"",label:"Alamat"},model:{value:t.guru.alamat,callback:function(e){t.$set(t.guru,"alamat",e)},expression:"guru.alamat"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-select",{attrs:{items:["Guru Kelas","Guru Olah Raga","Guru PAI","Guru B. Inggris","Tenaga Administrasi","Penjaga Sekolah"],dense:"","hide-details":"",outlined:"",label:"Jabatan"},model:{value:t.guru.jabatan,callback:function(e){t.$set(t.guru,"jabatan",e)},expression:"guru.jabatan"}})],1)],1),t._v(" "),a("v-row",[a("v-col",{staticClass:"d-flex justify-end"},[a("v-btn",{staticClass:"bg-gradient-primary",attrs:{type:"submit",dark:"",rounded:""}},[t._v("Simpan")])],1)],1)],1)],1)],1)],1),t._v(" "),t.file?a("xlsx-read",{attrs:{file:t.file}},[a("xlsx-json",{on:{parsed:t.parsedFile}})],1):t._e(),t._v(" "),t.newGurus.length>0?a("v-data-table",{attrs:{headers:t.headers,items:t.newGurus,loding:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-container",[a("v-row",[a("v-col",[a("v-btn",{staticClass:"bg-gradient-primary",attrs:{dark:"",rounded:""},on:{click:t.impor}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tImpor\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1)]},proxy:!0},{key:"item.ttl",fn:function(e){var n=e.item;return[a("div",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(n.tempat_lahir)+", "+t._s(n.tanggal_lahir)+"\n\t\t\t\t\t\t\t")])]}},{key:"item.status",fn:function(e){var n=e.item;return[a("span",[a("v-icon",{attrs:{color:"1"==n.is_active?"success":"error"}},[t._v("mdi-check-circle")])],1)]}},{key:"item.opsi",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){return t.remove(n)}}},[a("v-icon",{attrs:{color:"error"}},[t._v("mdi-delete")])],1)]}}],null,!1,376297703)}):t._e()],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},2677:(t,e,a)=>{a.d(e,{Z:()=>s});var n=function(t,e,a,n,s,i,o,r,l,u){"boolean"!=typeof o&&(l=r,r=o,o=!1);var d,c="function"==typeof a?a.options:a;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),n&&(c._scopeId=n),i?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=d):e&&(d=o?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),d)if(c.functional){var h=c.render;c.render=function(t,e){return d.call(e),h(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,d):[d]}return a};const s=n({},undefined,{mixins:[{inject:["getWorkbook"],props:{sheet:{type:[String,Number],default:0},options:{type:Object,default:()=>({})}},data:()=>({loaded:!1}),computed:{loadedAndSheet(){return this.loaded?this.sheet:null}},watch:{loadedAndSheet:{immediate:!0,handler(t){null!==t&&this.getWorkbook(this._callBack)}}},mounted(){this._callBack=()=>{console.warning("Missing data parsing callback")}},methods:{sheetNameFinder(t){return Number.isInteger(this.sheet)?t.SheetNames[this.sheet]:this.sheet}}}],data:()=>({collection:null}),mounted(){this._callBack=this.updateJson,this.load()},methods:{async load(){const{utils:{sheet_to_json:t}}=await a.e(869).then(a.t.bind(a,7869,23));this._sheet_to_json=t,this.loaded=!0},updateJson(t){const e=t.Sheets[this.sheetNameFinder(t)];this.collection=this._sheet_to_json(e,this.options),this.$emit("parsed",this.collection)}},render(t){return this.$scopedSlots.default&&this.loaded?t("div",[this.$scopedSlots.default({collection:this.collection})]):null}},undefined,undefined,undefined,void 0,void 0)},7868:(t,e,a)=>{a.d(e,{Z:()=>s});var n=function(t,e,a,n,s,i,o,r,l,u){"boolean"!=typeof o&&(l=r,r=o,o=!1);var d,c="function"==typeof a?a.options:a;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),n&&(c._scopeId=n),i?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=d):e&&(d=o?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),d)if(c.functional){var h=c.render;c.render=function(t,e){return d.call(e),h(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,d):[d]}return a};const s=n({},undefined,{mixins:[{data:()=>({libLoaded:!1,loading:!1}),provide(){return{getWorkbook:this.getWorkbook}},methods:{startLoading(){this.loading=!0,this.$emit("loading",this.loading)},endLoading(){this.loading=!1,this.$emit("loading",this.loading)},fireCallBacks(){this._callbackQueue&&Array.isArray(this._callbackQueue)&&this._callbackQueue.forEach((t=>{try{t(this._workbook)}catch(t){console.warning("error in firing callbacks",t)}}))},getWorkbook(t){this._callbackQueue&&this._callbackQueue.push(t),this._workbook&&t(this._workbook)}}}],props:{file:{type:null,default:null},options:{type:Object,default:()=>({})}},computed:{loadedAndFile(){return this.libLoaded?this.file:null}},watch:{loadedAndFile:{immediate:!0,handler(t){t&&this.parseFile(t)}}},mounted(){this.load()},methods:{async load(){const{globalPolyfill:t}=a(5942);t();const{read:e}=await a.e(869).then(a.t.bind(a,7869,23));this._read=e,this.libLoaded=!0,this._callbackQueue=[]},parseFile(t){this.startLoading();const e=new FileReader;e.onload=t=>{let e="";const a=new Uint8Array(t.target.result),n=a.byteLength;for(var s=0;s<n;s++)e+=String.fromCharCode(a[s]);this._workbook=this._read(e,{type:"binary",...this.options}),this.fireCallBacks(),this.$emit("parsed",this._workbook),this.endLoading()},e.onerror=t=>{console.log(t)},e.readAsArrayBuffer(t)}},render(t){return this.$scopedSlots.default&&this.libLoaded?t("div",[this.$scopedSlots.default({loading:this.loading})]):null}},undefined,undefined,undefined,void 0,void 0)},7618:(t,e,a)=>{a.d(e,{Z:()=>s});var n=function(t,e,a,n,s,i,o,r,l,u){"boolean"!=typeof o&&(l=r,r=o,o=!1);var d,c="function"==typeof a?a.options:a;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),n&&(c._scopeId=n),i?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=d):e&&(d=o?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),d)if(c.functional){var h=c.render;c.render=function(t,e){return d.call(e),h(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,d):[d]}return a};const s=n({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.table?a("div",{domProps:{innerHTML:t._s(t.table)}}):t._e()},staticRenderFns:[]},undefined,{mixins:[{inject:["getWorkbook"],props:{sheet:{type:[String,Number],default:0},options:{type:Object,default:()=>({})}},data:()=>({loaded:!1}),computed:{loadedAndSheet(){return this.loaded?this.sheet:null}},watch:{loadedAndSheet:{immediate:!0,handler(t){null!==t&&this.getWorkbook(this._callBack)}}},mounted(){this._callBack=()=>{console.warning("Missing data parsing callback")}},methods:{sheetNameFinder(t){return Number.isInteger(this.sheet)?t.SheetNames[this.sheet]:this.sheet}}}],data:()=>({table:null}),mounted(){this._callBack=this.updateTable,this.load()},methods:{async load(){const{utils:{sheet_to_html:t}}=await a.e(869).then(a.t.bind(a,7869,23));this._sheet_to_html=t,this.loaded=!0},updateTable(t){const e=t.Sheets[this.sheetNameFinder(t)];this.table=this._sheet_to_html(e,this.options)}}},undefined,!1,undefined,void 0,void 0)},5942:(t,e,a)=>{a.r(e),a.d(e,{globalPolyfill:()=>n});const n=()=>{var t=t||window;window&&(window.global=t)}}}]);
//# sourceMappingURL=627.js.map